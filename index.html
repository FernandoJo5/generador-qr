<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>FJ ¬∑ Generador de C√≥digos QR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fuente -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- Librer√≠a QR -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <style>
    :root {
      /* Tema claro (por defecto) */
      --color-bg-principal: #e0f2f1;
      --color-bg-papel: #fdf7ee;
      --color-bg-panel: rgba(255, 255, 255, 0.94);
      --color-texto: #111827;
      --color-texto-suave: #4b5563;
      --color-borde-suave: rgba(15, 23, 42, 0.12);

      --verde: #0f766e;
      --verde-oscuro: #0b4c47;
      --verde-claro: #a7f3d0;
      --morado: #6d28d9;
      --morado-oscuro: #4c1d95;

      --sombra-profunda: 0 22px 40px rgba(15, 23, 42, 0.48);
      --sombra-card: 0 14px 26px rgba(15, 23, 42, 0.18);
      --radio-card: 22px;
      --dur-anim: 0.25s;
    }

    body.modo-oscuro {
      --color-bg-principal: radial-gradient(circle at top, #064e3b 0, #020617 40%, #020617 100%);
      --color-bg-papel: #0b1120;
      --color-bg-panel: rgba(15, 23, 42, 0.96);
      --color-texto: #e5e7eb;
      --color-texto-suave: #9ca3af;
      --color-borde-suave: rgba(148, 163, 184, 0.4);
      --sombra-profunda: 0 22px 40px rgba(0, 0, 0, 0.9);
      --sombra-card: 0 18px 30px rgba(15, 23, 42, 0.9);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "DM Sans", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top left, #0f766e 0, #020617 45%, #020617 100%);
      color: var(--color-texto);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      transition: background 0.4s ease;
    }

    body.modo-oscuro {
      background: var(--color-bg-principal);
    }

    /* Fondo tipo "paisajismo" */
    .paisaje {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .colina {
      position: absolute;
      border-radius: 50%;
      filter: blur(2px);
      opacity: 0.38;
      background: radial-gradient(circle at top, #22c55e, #065f46);
      animation: flotando 14s ease-in-out infinite alternate;
    }

    .colina.colina-1 {
      width: 700px;
      height: 280px;
      left: -120px;
      bottom: -140px;
    }

    .colina.colina-2 {
      width: 560px;
      height: 220px;
      right: -160px;
      bottom: -120px;
      background: radial-gradient(circle at top, #4ade80, #047857);
      animation-delay: 2s;
    }

    .colina.colina-3 {
      width: 420px;
      height: 190px;
      left: 60%;
      top: -120px;
      background: radial-gradient(circle at bottom, #22c55e, #166534);
      opacity: 0.25;
      animation-delay: 4s;
    }

    @keyframes flotando {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-26px); }
    }

    .marco {
      max-width: 1160px;
      width: 100%;
      background: var(--color-bg-papel);
      border-radius: 28px;
      padding: 20px 22px 20px;
      box-shadow:
        var(--sombra-profunda),
        0 0 0 2px rgba(15, 118, 110, 0.22);
      position: relative;
      z-index: 1;
      overflow: hidden;
    }

    .marco::before,
    .marco::after {
      content: "";
      position: absolute;
      inset: 16px;
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      pointer-events: none;
    }

    .marco::after {
      inset: 20px;
      border-style: dashed;
      opacity: 0.55;
    }

    .marca-agua {
      position: absolute;
      font-size: 76px;
      font-weight: 700;
      right: -12px;
      top: -20px;
      color: rgba(22, 163, 74, 0.10);
      transform: rotate(-18deg);
      pointer-events: none;
      user-select: none;
    }

    /* CABECERA */
    .cabecera {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
      gap: 18px;
      position: relative;
      z-index: 1;
    }

    .logo-fj {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .logo-fj-emblema {
      width: 46px;
      height: 46px;
      border-radius: 18px;
      background: radial-gradient(circle at top left, #22c55e, #065f46);
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.6);
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e5fdf4;
      font-weight: 700;
      letter-spacing: 0.05em;
      font-size: 16px;
    }

    .logo-fj-emblema span {
      position: relative;
      z-index: 1;
    }

    .logo-fj-emblema::after {
      /* mini cuadro QR */
      content: "";
      position: absolute;
      right: 4px;
      bottom: 4px;
      width: 14px;
      height: 14px;
      border-radius: 3px;
      background:
        linear-gradient(135deg, #f9fafb 0, #d1fae5 20%, #bbf7d0 80%),
        repeating-linear-gradient(45deg, transparent 0 2px, rgba(22, 163, 74, 0.2) 2px 4px);
      box-shadow: 0 0 0 1px rgba(6, 95, 70, 0.8);
    }

    .logo-fj-texto {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .logo-fj-texto .titulo {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--verde-oscuro);
    }

    body.modo-oscuro .logo-fj-texto .titulo {
      color: #bbf7d0;
    }

    .logo-fj-texto .subtitulo {
      font-size: 12px;
      color: var(--color-texto-suave);
    }

    /* Bot√≥n modo oscuro */
    .toggle-modo {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
      color: var(--color-texto-suave);
      cursor: pointer;
      user-select: none;
    }

    .toggle-switch {
      width: 50px;
      height: 26px;
      border-radius: 999px;
      background: #e5e7eb;
      border: 1px solid rgba(148, 163, 184, 0.9);
      position: relative;
      padding: 2px;
      box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.6);
      display: inline-flex;
      align-items: center;
    }

    .toggle-circle {
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: #ffffff;
      box-shadow: 0 6px 10px rgba(148, 163, 184, 0.8);
      transform: translateX(0);
      transition: transform 0.2s ease, background 0.2s ease;
    }

    body.modo-oscuro .toggle-switch {
      background: #020617;
      border-color: #22c55e;
      box-shadow: inset 0 0 0 1px rgba(34, 197, 94, 0.5);
    }

    body.modo-oscuro .toggle-circle {
      transform: translateX(22px);
      background: #22c55e;
      box-shadow: 0 6px 14px rgba(16, 185, 129, 0.8);
    }

    /* CONTENIDO PRINCIPAL */
    .contenido {
      position: relative;
      display: grid;
      grid-template-columns: minmax(0, 1.15fr) minmax(0, 0.95fr);
      gap: 26px;
      z-index: 1;
    }

    @media (max-width: 960px) {
      .contenido {
        grid-template-columns: 1fr;
      }
      .cabecera {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    h1 {
      margin: 0;
      font-size: 28px;
      line-height: 1.1;
      color: var(--color-texto);
    }

    .texto-intro {
      margin-top: 8px;
      margin-bottom: 10px;
      font-size: 14px;
      color: var(--color-texto-suave);
    }

    .badge-linea {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 12px;
      color: var(--color-texto-suave);
    }

    .badge {
      background: linear-gradient(135deg, var(--verde), var(--morado));
      color: white;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.6);
    }

    .badge-linea span {
      opacity: 0.85;
    }

    /* Panel opciones tipo MEQR */
    .panel-tipos {
      margin-top: 10px;
      margin-bottom: 6px;
    }

    .panel-titulo {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--color-texto-suave);
      margin-bottom: 8px;
    }

    .grid-tipos {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
    }

    .tipo-card {
      background: var(--color-bg-panel);
      border-radius: 16px;
      padding: 10px 12px;
      border: 1px solid var(--color-borde-suave);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      cursor: pointer;
      box-shadow: 0 6px 12px rgba(15, 23, 42, 0.08);
      transition:
        transform var(--dur-anim) ease,
        box-shadow var(--dur-anim) ease,
        border-color var(--dur-anim) ease,
        background var(--dur-anim) ease;
      animation: aparecer 0.5s ease backwards;
    }

    .tipo-card:nth-child(1) { animation-delay: 0.02s; }
    .tipo-card:nth-child(2) { animation-delay: 0.05s; }
    .tipo-card:nth-child(3) { animation-delay: 0.08s; }
    .tipo-card:nth-child(4) { animation-delay: 0.11s; }
    .tipo-card:nth-child(5) { animation-delay: 0.14s; }
    .tipo-card:nth-child(6) { animation-delay: 0.17s; }
    .tipo-card:nth-child(7) { animation-delay: 0.2s; }
    .tipo-card:nth-child(8) { animation-delay: 0.23s; }
    .tipo-card:nth-child(9) { animation-delay: 0.26s; }

    .tipo-icono {
      width: 26px;
      height: 26px;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      background: rgba(16, 185, 129, 0.08);
    }

    .tipo-card span {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tipo-card:hover {
      transform: translateY(-3px) scale(1.01);
      box-shadow: var(--sombra-card);
      border-color: rgba(16, 185, 129, 0.7);
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(129, 140, 248, 0.08));
    }

    .tipo-card.activo {
      border-color: rgba(16, 185, 129, 0.9);
      box-shadow: var(--sombra-card);
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.14), rgba(79, 70, 229, 0.14));
    }

    @keyframes aparecer {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Panel principal de datos */
    .panel {
      margin-top: 10px;
      background: var(--color-bg-panel);
      border-radius: 18px;
      padding: 16px 16px 14px;
      border: 1px solid var(--color-borde-suave);
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.12);
    }

    label {
      font-size: 13px;
      margin-bottom: 4px;
      display: block;
      color: var(--color-texto-suave);
    }

    .input-texto {
      width: 100%;
      border-radius: 14px;
      border: 1px solid #d4d4dd;
      padding: 10px 12px;
      font-size: 14px;
      outline: none;
      background: #f9fafb;
      transition: border 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    body.modo-oscuro .input-texto {
      background: #020617;
      border-color: #1f2937;
      color: #e5e7eb;
    }

    .input-texto:focus {
      border-color: var(--morado);
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(109, 40, 217, 0.3);
    }

    body.modo-oscuro .input-texto:focus {
      background: #020617;
    }

    .fila-opciones {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 10px;
    }

    .campo {
      flex: 1 1 140px;
    }

    input[type="number"],
    select {
      width: 100%;
      border-radius: 12px;
      border: 1px solid #d4d4dd;
      padding: 8px 10px;
      font-size: 13px;
      background: #f9fafb;
      outline: none;
      transition: border 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    body.modo-oscuro input[type="number"],
    body.modo-oscuro select {
      background: #020617;
      border-color: #1f2937;
      color: #e5e7eb;
    }

    input[type="number"]:focus,
    select:focus {
      border-color: var(--verde);
      box-shadow: 0 0 0 1px rgba(15, 118, 110, 0.28);
      background: #ffffff;
    }

    body.modo-oscuro input[type="number"]:focus,
    body.modo-oscuro select:focus {
      background: #020617;
    }

    .colores {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .color-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: var(--color-texto-suave);
    }

    .color-item input[type="color"] {
      width: 32px;
      height: 32px;
      padding: 0;
      border-radius: 999px;
      border: 1px solid #cbd5e1;
      background: #f9fafb;
      cursor: pointer;
    }

    .botones {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition:
        transform 0.12s ease,
        box-shadow 0.12s ease,
        background 0.12s ease,
        color 0.12s ease;
      white-space: nowrap;
    }

    .btn span.icono-btn {
      font-size: 16px;
    }

    .btn-primario {
      background: linear-gradient(135deg, var(--verde), var(--morado));
      color: #f9fafb;
      box-shadow: 0 12px 20px rgba(15, 23, 42, 0.4);
    }

    .btn-secundario {
      background: transparent;
      color: var(--color-texto);
      border: 1px solid rgba(15, 23, 42, 0.18);
      backdrop-filter: blur(2px);
    }

    .btn-terciario {
      background: transparent;
      color: var(--color-texto-suave);
      border: none;
      text-decoration: underline;
      text-decoration-style: dotted;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(15, 23, 42, 0.4);
    }

    .btn-secundario:hover {
      background: rgba(129, 230, 217, 0.08);
    }

    .btn-terciario:hover {
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 6px 12px rgba(15, 23, 42, 0.26);
    }

    .mensaje-error {
      margin-top: 8px;
      font-size: 12px;
      color: #b91c1c;
      display: none;
    }

    .nota {
      font-size: 11px;
      color: var(--color-texto-suave);
      margin-top: 8px;
    }

    /* COLUMNA DERECHA (PREVIEW) */
    .col-derecha {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .tarjeta-qr {
      background: radial-gradient(circle at top left, #020617, #020617 40%, #020617 100%);
      border-radius: 22px;
      padding: 18px 16px 16px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.9),
        0 24px 40px rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      position: relative;
      overflow: hidden;
      animation: aparecer 0.6s ease 0.15s backwards;
    }

    .tarjeta-qr::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top, rgba(45, 212, 191, 0.18), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .tarjeta-qr-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
    }

    .tarjeta-qr-titulo {
      font-size: 13px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .tarjeta-qr-sello {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.95);
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: #e5e7eb;
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.22), rgba(129, 140, 248, 0.24));
    }

    .qr-wrapper {
      margin-top: 6px;
      background: #020617;
      border-radius: 18px;
      padding: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(148, 163, 184, 0.45);
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.9);
      position: relative;
      z-index: 1;
      min-height: 220px;
    }

    #qr-container canvas,
    #qr-container img {
      border-radius: 12px;
      box-shadow: 0 12px 22px rgba(15, 23, 42, 0.9);
      animation: aparecer 0.4s ease;
    }

    .qr-placeholder {
      text-align: center;
      font-size: 13px;
      color: #9ca3af;
    }

    .qr-placeholder span {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.85);
      margin-bottom: 8px;
      font-size: 20px;
    }

    .footer {
      margin-top: 8px;
      font-size: 11px;
      color: #9ca3af;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      position: relative;
      z-index: 1;
    }

    .footer span strong {
      color: #e5e7eb;
    }

    .footer-pill {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      border-radius: 999px;
      padding: 3px 10px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.85);
    }

    @media (max-width: 600px) {
      body {
        padding: 14px;
      }
      .marco {
        padding: 16px 14px;
      }
      h1 {
        font-size: 22px;
      }
    }
  </style>
</head>
<body>
  <div class="paisaje">
    <div class="colina colina-1"></div>
    <div class="colina colina-2"></div>
    <div class="colina colina-3"></div>
  </div>

  <div class="marco">
    <div class="marca-agua">QR</div>

    <!-- CABECERA -->
    <header class="cabecera">
      <div class="logo-fj">
        <div class="logo-fj-emblema">
          <span>FJ</span>
        </div>
        <div class="logo-fj-texto">
          <div class="titulo">FJ QR Studio</div>
          <div class="subtitulo">Generador de c√≥digos QR ¬∑ Verde & minimalista</div>
        </div>
      </div>

      <div class="toggle-modo" id="toggle-modo">
        <span>Modo oscuro</span>
        <div class="toggle-switch">
          <div class="toggle-circle"></div>
        </div>
      </div>
    </header>

    <main class="contenido">
      <!-- COLUMNA IZQUIERDA -->
      <section>
        <div class="badge-linea">
          <div class="badge">Generador QR vintage</div>
          <span>Enlaces ¬∑ PDFs ¬∑ Im√°genes ¬∑ Redes sociales ¬∑ WiFi ¬∑ Logo QR</span>
        </div>

        <h1>Convierte cualquier idea en un c√≥digo QR elegante.</h1>
        <p class="texto-intro">
          Elige el tipo de QR, escribe tu enlace o texto y descarga tu c√≥digo listo para compartir,
          imprimir o integrar en tus dise√±os.
        </p>

        <!-- Tipo de QR estilo tarjetas -->
        <section class="panel-tipos">
          <div class="panel-titulo">Tipo de QR (solo para ayudarte a organizar)</div>
          <div class="grid-tipos" id="grid-tipos">
            <div class="tipo-card activo" data-tipo="enlace" data-placeholder="https://mi-sitio.com">
              <div class="tipo-icono">üåê</div>
              <span>Enlace / Sitio web</span>
            </div>
            <div class="tipo-card" data-tipo="imagen" data-placeholder="https://mi-sitio.com/imagen.jpg">
              <div class="tipo-icono">üñºÔ∏è</div>
              <span>Imagen</span>
            </div>
            <div class="tipo-card" data-tipo="pdf" data-placeholder="https://mi-sitio.com/archivo.pdf">
              <div class="tipo-icono">üìÑ</div>
              <span>PDF / Documento</span>
            </div>
            <div class="tipo-card" data-tipo="whatsapp" data-placeholder="https://wa.me/51999999999">
              <div class="tipo-icono">üí¨</div>
              <span>WhatsApp</span>
            </div>
            <div class="tipo-card" data-tipo="links" data-placeholder="https://mi-linktree.com/usuario">
              <div class="tipo-icono">üìã</div>
              <span>Lista de enlaces</span>
            </div>
            <div class="tipo-card" data-tipo="youtube" data-placeholder="https://youtu.be/ID_VIDEO">
              <div class="tipo-icono">‚ñ∂Ô∏è</div>
              <span>Video / YouTube</span>
            </div>
            <div class="tipo-card" data-tipo="instagram" data-placeholder="https://instagram.com/miusuario">
              <div class="tipo-icono">üì∏</div>
              <span>Instagram / Redes</span>
            </div>
            <div class="tipo-card" data-tipo="wifi" data-placeholder="WIFI:S:MiRed;T:WPA;P:MiContrase√±a;;">
              <div class="tipo-icono">üì∂</div>
              <span>WiFi</span>
            </div>
            <div class="tipo-card" data-tipo="logo" data-placeholder="https://mi-sitio.com">
              <div class="tipo-icono">‚ú®</div>
              <span>Logo QR / Marca</span>
            </div>
          </div>
        </section>

        <!-- Panel datos -->
        <section class="panel">
          <label for="qr-input">Enlace o texto</label>
          <input
            id="qr-input"
            class="input-texto"
            type="text"
            placeholder="https://mi-sitio.com o cualquier URL / texto"
          />

          <div class="fila-opciones">
            <div class="campo">
              <label for="size">Tama√±o (px)</label>
              <input id="size" type="number" min="140" max="600" value="260" />
            </div>
            <div class="campo">
              <label for="densidad">Nivel de correcci√≥n</label>
              <select id="densidad">
                <option value="H">Alta (H) ‚Äì m√°s robusto</option>
                <option value="Q">Medio alto (Q)</option>
                <option value="M">Medio (M)</option>
                <option value="L">Bajo (L)</option>
              </select>
            </div>
          </div>

          <div style="margin-top:10px;">
            <label>Colores del c√≥digo</label>
            <div class="colores">
              <div class="color-item">
                <span>Frente</span>
                <input id="fg-color" type="color" value="#0f766e" />
              </div>
              <div class="color-item">
                <span>Fondo</span>
                <input id="bg-color" type="color" value="#fdf7ee" />
              </div>
            </div>
          </div>

          <div class="botones">
            <button id="btn-generar" class="btn btn-primario">
              <span class="icono-btn">‚óè</span>
              Generar c√≥digo QR
            </button>
            <button id="btn-descargar" class="btn btn-secundario" disabled>
              <span class="icono-btn">‚¨á</span>
              Descargar PNG
            </button>
            <button id="btn-limpiar" class="btn btn-terciario">
              Limpiar todo
            </button>
          </div>

          <div id="mensaje-error" class="mensaje-error">
            Por favor, escribe un enlace o texto antes de generar el c√≥digo QR.
          </div>
        </section>

        <p class="nota">
          Tip: puedes usar enlaces a im√°genes, PDFs, videos, documentos, perfiles de redes,
          redes WiFi (formato est√°ndar) y mucho m√°s. El QR solo codifica el texto que ingreses.
        </p>
      </section>

      <!-- COLUMNA DERECHA (VISTA PREVIA) -->
      <section class="col-derecha">
        <div class="tarjeta-qr">
          <div class="tarjeta-qr-header">
            <div>
              <div class="tarjeta-qr-titulo">Vista previa</div>
              <div style="font-size:12px; color:#e5e7eb; margin-top:2px;">
                Tu c√≥digo QR en estilo FJ ¬∑ Vintage ¬∑ Verde.
              </div>
            </div>
            <div class="tarjeta-qr-sello">LISTO PARA USAR</div>
          </div>

          <div class="qr-wrapper">
            <div id="qr-container" class="qr-placeholder">
              <span>+</span>
              <div>
                Esperando contenido.<br />
                Elige un tipo, escribe tu enlace y genera el c√≥digo.
              </div>
            </div>
          </div>

          <div class="footer">
            <span>
              √öltima acci√≥n: <strong id="estado-qr">Sin generar</strong>
            </span>
            <span class="footer-pill">FJ ¬∑ Verde ¬∑ Vintage ¬∑ Minimal</span>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const inputTexto = document.getElementById("qr-input");
    const sizeInput = document.getElementById("size");
    const densidadInput = document.getElementById("densidad");
    const fgColorInput = document.getElementById("fg-color");
    const bgColorInput = document.getElementById("bg-color");
    const btnGenerar = document.getElementById("btn-generar");
    const btnDescargar = document.getElementById("btn-descargar");
    const btnLimpiar = document.getElementById("btn-limpiar");
    const mensajeError = document.getElementById("mensaje-error");
    const estadoQr = document.getElementById("estado-qr");
    const qrContainer = document.getElementById("qr-container");
    const gridTipos = document.getElementById("grid-tipos");
    const toggleModo = document.getElementById("toggle-modo");

    let qrInstance = null;

    // Modo oscuro: recordar preferencia simple con localStorage
    function aplicarTemaInicial() {
      const temaGuardado = localStorage.getItem("fj-qr-tema");
      if (temaGuardado === "oscuro") {
        document.body.classList.add("modo-oscuro");
      }
    }
    aplicarTemaInicial();

    toggleModo.addEventListener("click", () => {
      document.body.classList.toggle("modo-oscuro");
      const esOscuro = document.body.classList.contains("modo-oscuro");
      localStorage.setItem("fj-qr-tema", esOscuro ? "oscuro" : "claro");
    });

    function limpiarQR() {
      qrContainer.innerHTML = "";
    }

    function mapaDensidad(valor) {
      switch (valor) {
        case "L": return QRCode.CorrectLevel.L;
        case "M": return QRCode.CorrectLevel.M;
        case "Q": return QRCode.CorrectLevel.Q;
        case "H":
        default: return QRCode.CorrectLevel.H;
      }
    }

    function generarQR() {
      const texto = inputTexto.value.trim();
      const size = parseInt(sizeInput.value, 10) || 260;
      const colorFrente = fgColorInput.value || "#0f766e";
      const colorFondo = bgColorInput.value || "#fdf7ee";
      const nivel = mapaDensidad(densidadInput.value);

      if (!texto) {
        mensajeError.style.display = "block";
        estadoQr.textContent = "Error: sin texto";
        return;
      } else {
        mensajeError.style.display = "none";
      }

      limpiarQR();

      qrInstance = new QRCode(qrContainer, {
        text: texto,
        width: size,
        height: size,
        colorDark: colorFrente,
        colorLight: colorFondo,
        correctLevel: nivel,
      });

      estadoQr.textContent = "Generado";
      btnDescargar.disabled = false;
    }

    function descargarPNG() {
      if (!qrInstance) return;

      const img = qrContainer.querySelector("img");
      const canvas = qrContainer.querySelector("canvas");
      let dataURL = null;

      if (canvas) {
        dataURL = canvas.toDataURL("image/png");
      } else if (img) {
        dataURL = img.src;
      }

      if (!dataURL) return;

      const enlace = document.createElement("a");
      enlace.href = dataURL;
      enlace.download = "codigo-qr-fj.png";
      document.body.appendChild(enlace);
      enlace.click();
      document.body.removeChild(enlace);

      estadoQr.textContent = "Descargado";
    }

    function limpiarTodo() {
      inputTexto.value = "";
      limpiarQR();
      qrContainer.className = "qr-placeholder";
      qrContainer.innerHTML = `
        <span>+</span>
        <div>
          Esperando contenido.<br />
          Elige un tipo, escribe tu enlace y genera el c√≥digo.
        </div>
      `;
      btnDescargar.disabled = true;
      mensajeError.style.display = "none";
      estadoQr.textContent = "Sin generar";
    }

    btnGenerar.addEventListener("click", generarQR);
    btnDescargar.addEventListener("click", descargarPNG);
    btnLimpiar.addEventListener("click", (e) => {
      e.preventDefault();
      limpiarTodo();
    });

    inputTexto.addEventListener("keyup", (e) => {
      if (e.key === "Enter") {
        generarQR();
      }
    });

    // Selecci√≥n de tipo al estilo MEQR
    gridTipos.addEventListener("click", (e) => {
      const card = e.target.closest(".tipo-card");
      if (!card) return;

      // Quitar activo a todos
      Array.from(gridTipos.querySelectorAll(".tipo-card")).forEach((c) =>
        c.classList.remove("activo")
      );

      card.classList.add("activo");

      const placeholder = card.getAttribute("data-placeholder");
      if (placeholder && !inputTexto.value) {
        inputTexto.placeholder = placeholder;
      }
    });
  </script>
</body>
</html>